<div class="content-wrapper">
  <div class="content-body">
    <!-- content-header component -->
    <app-content-header [contentHeader]="contentHeader"></app-content-header>

    <!-- account setting page -->
    <section id="page-account-settings">
      <div class="row">
        <div class="col-lg-12">
          <button class="back-button" (click)="goBackShift()"><i data-feather="arrow-left"
              class="font-medium-3 mr-1"></i>Back</button>
        </div>
      </div>
      <div class="row nav-vertical d-flex">
        <div class="col-md-3 mb-2 mb-md-0">
          <ul ngbNav #navVertical="ngbNav" class="nav nav-pills flex-column nav-left">

            <li class="nav-item" ngbNavItem>
              <a ngbNavLink class="nav-link d-flex py-75" id="account-pill-general" data-toggle="pill"
                href="#account-vertical-general" aria-expanded="true">
                <i data-feather="user" class="font-medium-3 mr-1"></i>
                <span class="font-weight-bold">Basic Information</span>
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Shift Information</h4>
                  </div>
                  <div class="card-body">

                    <div class=" col-lg-12 " *ngFor="let mng of snglShftDtls">
                      <div class="card" style="margin-bottom:auto ;">

                        <div class="row space  mb-1"
                          *ngIf="currentUser.role =='User' || currentUser.role =='Agency' || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                          <div class="col-6">
                            <h6>Community Name : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.community_name}}</span></div>
                        </div>

                        <div class="row space  mb-1"
                          *ngIf="currentUser.role =='User' || currentUser.role =='Agency' || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                          <div class="col-6">
                            <h6>Community Phone No : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.community_phone_no |
                              numberFormat}}</span></div>
                        </div>

                        <div class="row space  mb-1"
                          *ngIf="currentUser.role =='SuperAdmin' || currentUser.user_role == 1 || this.currentUser.user_role == 3">
                          <div class="col-6">
                            <h6>Agency Applicable Rates : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.agcy_app_rate}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Rate Type : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.rate_type}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift For : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.for_cp == '2' ? 'Agency' : mng.for_cp
                              == '0' ? 'Agency And Community' : 'Community'}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Department : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.department}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Position : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.positions}}</span></div>
                        </div>

                        <div class="row space  mb-1" *ngIf="spread_rate == true && (currentUser.user_role == 1 || (currentUser.user_role == 4 && permision.addPrms == '1'))">
                          <div class="col-6">
                            <h6>Hourly Rate (Agencies Using Spread) : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.spread_hourly_rate ? mng.spread_hourly_rate : '---'}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Minimum Certification : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.certification}}</span></div>
                        </div>

                        <div class="row space  mb-1" *ngIf="currentUser.role =='User' || currentUser.role =='Agency'">
                          <div class="col-6">
                            <h6>Allow Overtime : </h6>
                          </div>
                          <div class="col-6"><span class="overtime"> {{mng.overtime == 1 ? 'Yes' : 'No'}}</span>
                          </div>
                        </div>

                        <!-- <div class="row space  mb-1">
                                <div class="col-6">
                                  <h6>Cancellation Period : </h6>
                                </div>
                                <div class="col-6"><span class="description"> {{mng.cancellation_period}}</span></div>
                              </div> -->


                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Description : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.description}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift Start Date : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.start_time | customDateTime}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift Start Time : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.start_time | customTime}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift End Date : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.end_time | customDateTime}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift End Time : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.end_time | customTime}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift Duration : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{duration}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift Posted At : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng?.cr}}</span></div>
                        </div>

                        <div class="row space  mb-1" *ngIf="this.currentUser.user_role == 1">
                          <div class="col-6">
                            <h6>Shift Posted By : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng?.shift_posted_by}}</span></div>
                        </div>
                        <div class="row space  mb-1" *ngIf="currentUser.user_role == '4'">
                          <div class="col-6">
                            <h6>Additional Note : </h6>
                          </div>
                          <div class="col-6"><span class="additional_note"> {{mng.additional_note ?
                              mng.additional_note : '---' }}</span></div>
                        </div>

                        <div class="row space  mb-1" *ngIf="currentUser.role != 'User' && currentUser.role != 'Agency'">
                          <div class="col-6">
                            <h6>Delay : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.delay + ' '+ mng.h_m}}</span></div>
                        </div>

                        <div class="row space  mb-1"
                          *ngIf="currentUser.user_role == '5' || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                          <div class="col-6">
                            <h6>Clock In Time : </h6>
                          </div>
                          <div class="col-6"><span class="description" *ngIf="mng.user_start_time">
                              {{mng.user_start_time | customDateTime}} {{mng.user_start_time | customTime}}
                            </span><span class="description" *ngIf="!mng.user_start_time"> ----------
                            </span></div>
                        </div>

                        <div class="row space  mb-1"
                          *ngIf="currentUser.user_role == '5' || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                          <div class="col-6">
                            <h6>Clock Out Time : </h6>
                          </div>
                          <div class="col-6"><span class="description" *ngIf="mng.user_end_time"> {{mng.user_end_time
                              | customDateTime}} {{mng.user_end_time | customTime}}
                            </span><span class="description" *ngIf="!mng.user_end_time"> ----------
                            </span></div>
                        </div>

                        <div class="row space  mb-1"
                        *ngIf="currentUser.user_role == '5' || currentUser.user_role == '4' || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                        <div class="col-6">
                          <h6>Adjusted Clock In Time : </h6>
                        </div>
                        <div class="col-6"><span class="description" *ngIf="mng.adj_start_time"> {{mng.adj_start_time | customDateTime}}
                            {{mng.adj_start_time | customTime}}</span><span class="description" *ngIf="!mng.adj_start_time"> ----
                            </span></div>
                      </div>

                      <div class="row space  mb-1"
                        *ngIf="currentUser.user_role == '5' || currentUser.user_role == '4'  || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                        <div class="col-6">
                          <h6>Adjusted Clock Out Time : </h6>
                        </div>
                        <div class="col-6"><span class="description" *ngIf="mng.adj_start_time"> {{mng.adj_end_time | customDateTime}}
                            {{mng.adj_end_time | customTime}}</span><span class="description" *ngIf="!mng.adj_end_time"> ----
                            </span></div>
                      </div>

                        <div class="row space  mb-1"
                          *ngIf="currentUser.user_role == '5' || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                          <div class="col-6">
                            <h6>Break : </h6>
                          </div>
                          <div class="col-6"><span class="description">{{mng.break_time}}</span></div>
                        </div>

                        <div class="row space  mb-1"
                          *ngIf="currentUser.user_role == '5' || currentUser.role =='SuperAdmin' || this.currentUser.user_role == 3">
                          <div class="col-6">
                            <h6>Adjusted Break : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng.adj_break_time}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Community Address1 : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng?.community_address1}} </span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Community Address2 : </h6>
                          </div>
                          <div class="col-6"><span class="description">{{mng?.community_address2 || '---'}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>City : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng?.city}} </span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>State : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng?.state}} </span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Zip Code : </h6>
                          </div>
                          <div class="col-6"><span class="description"> {{mng?.zipcode}} </span></div>
                        </div>

                        <div class="row addUserbtn">
                          <div class="m-1">
                            <span *ngIf="!aplHide">
                              <button type="button" class="btn btn-primary mr-1" (click)="applyShift(mng)"
                                [disabled]="btnShow"
                                *ngIf="(currentUser.user_role == '4' || currentUser.role == 'Agency') && checkVal == '1'">Apply</button>
                            </span>
                            <button type="button" (click)="goBackShift()" class="btn btn-primary" [disabled]="btnShow">
                              <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                              Cancel
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="d-flex justify-content-center" *ngIf="!snglShftDtls">
                      <p>Loading...</p><span class="spinner-border spinner-border-sm" role="status"></span>
                    </div>
                  </div>
                  <div *ngIf="!snglShftDtls.length" class="text-center mb-1">
                    No Data To Display
                  </div>
                </div>
              </ng-template>
            </li>

            <li class="nav-item" ngbNavItem *ngIf="currentUser.role == 'Agency' && aplHide">
              <a ngbNavLink class="nav-link d-flex py-75" id="account-pill-general" data-toggle="pill"
                href="#account-vertical-general" aria-expanded="true">
                <i data-feather="user" class="font-medium-3 mr-1"></i>
                <span class="font-weight-bold">Clock In/Out</span>
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Details of Assigned User</h4>
                  </div>
                  <div class="card-body">

                    <div class=" col-lg-12 " *ngFor="let snglUsr of usrAssg;let i=index">
                      <div class="card">

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>First Name : </h6>
                          </div>
                          <div class="col-6"><span class="first_name"> {{snglUsr?.item?.first_name || '---' }}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Last Name : </h6>
                          </div>
                          <div class="col-6"><span class="last_name"> {{snglUsr?.item?.user_lastname || '---'
                              }}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Phone Number : </h6>
                          </div>
                          <div class="col-6"><span class="phone_number"> {{(snglUsr?.item?.phone_number ?
                              snglUsr.item?.phone_number
                              :'---') | mask: '(000) 000-0000' }}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift Start Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftStartTime"> {{shiftStartTime || '---' }}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Shift End Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{shiftEndTime || '---' }}</span></div>
                        </div>
                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Clock In Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{clkInTm || '---' }} </span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Clock Out Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{clkOtTm || '---'}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Variance Form Complete: </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime">{{varianceFomValue == '0' ? 'NO' :
                              'YES'}}</span></div>
                        </div>


                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Adjust Start Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{adjSrtTime || '---' }}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Adjust End Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{adjEndTime || '---'}} </span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Break: </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{snglShftDtls[0].break_time}}</span></div>
                          <!-- <div class="col-6" *ngIf="clockDetails.adj_break_time"><span class="shiftEndTime"> {{clockDetails.adj_break_time}} </span></div> -->
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Adjusted Break: </h6>
                          </div>
                          <!-- <div class="col-6" *ngIf="shftData?.adj_break_time"><span class="shiftEndTime"> {{shftData?.adj_break_time || 0}} </span></div> -->
                          <!-- <div class="col-6" *ngIf="clockDetails.adj_break_time"><span class="shiftEndTime"> {{clockDetails.adj_break_time}} </span></div> -->
                          <div class="col-6"><span class="shiftEndTime"> {{snglShftDtls[0].adj_break_time}}</span>
                          </div>

                        </div>
                        <span *ngFor="let mng of snglShftDtls">

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Agency Applicable Rates : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.agcy_app_rate}}</span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Rate Type : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.rate_type}}</span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role =='User'">
                            <div class="col-6">
                              <h6>Community Name : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.community_name}}</span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Department : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.department}}</span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Position : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.positions}}</span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Certification : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.certification}}</span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role =='User' || currentUser.role =='Agency'">
                            <div class="col-6">
                              <h6>Allow Overtime : </h6>
                            </div>
                            <div class="col-6"><span class="overtime"> {{mng.overtime == 1 ? 'Yes' : 'No'}}</span>
                            </div>
                          </div>

                          <!-- <div class="row space  mb-1">
                                  <div class="col-6">
                                    <h6>Cancellation Period : </h6>
                                  </div>
                                  <div class="col-6"><span class="description"> {{mng.cancellation_period}}</span></div>
                                </div> -->


                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Description : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.description}}</span></div>
                          </div>

                          <div class="row space  mb-1"
                            *ngIf="currentUser.role != 'User' && currentUser.role != 'Agency'">
                            <div class="col-6">
                              <h6>Delay : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.delay + ' '+ mng.h_m}}</span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role == 'User'">
                            <div class="col-6">
                              <h6>Clock In Time : </h6>
                            </div>
                            <div class="col-6"><span class="description" *ngIf="mng.user_start_time">
                                {{mng.user_start_time | customDateTime}}
                              </span><span class="description" *ngIf="!mng.user_start_time"> ----
                              </span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role == 'User'">
                            <div class="col-6">
                              <h6>Clock Out Time : </h6>
                            </div>
                            <div class="col-6"><span class="description" *ngIf="mng.user_end_time">
                                {{mng.user_end_time | customDateTime}}
                              </span><span class="description" *ngIf="!mng.user_end_time"> -----
                              </span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role == 'User'">
                            <div class="col-6">
                              <h6>Adjusted Clock In Time : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.adj_start_time | customDateTime}}
                                {{mng.adj_start_time | customTime}}</span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role == 'User'">
                            <div class="col-6">
                              <h6>Adjusted Clock Out Time : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.adj_end_time | customDateTime}}
                                {{mng.adj_end_time | customTime}}</span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role == 'User'">
                            <div class="col-6">
                              <h6>Break : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.break_time}}</span></div>
                          </div>

                          <div class="row space  mb-1" *ngIf="currentUser.role == 'User'">
                            <div class="col-6">
                              <h6>Adjusted Break : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng.adj_break_time}}</span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Community Address1 : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng?.community_address1}} </span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Community Address2 : </h6>
                            </div>
                            <div class="col-6"><span class="description">{{mng?.community_address2 || '---'}}</span>
                            </div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>Zip Code : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng?.zipcode}} </span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>City : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng?.city}} </span></div>
                          </div>

                          <div class="row space  mb-1">
                            <div class="col-6">
                              <h6>State : </h6>
                            </div>
                            <div class="col-6"><span class="description"> {{mng?.state}} </span></div>
                          </div>


                        </span>

                        <div class="row addUserbtn">
                          <div class="m-1">
                            <button type="button" (click)="goBackShift()" class="btn btn-primary" [disabled]="btnShow">
                              <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                              Cancel
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="card" *ngIf="!usrAssg">
                        <div>
                          No data to display
                        </div>
                      </div>
                    </div>
                    <!-- <div class="d-flex justify-content-center" *ngIf="!usrAssg?.length">
                      <p>Loading...</p><span class="spinner-border spinner-border-sm" role="status"></span>
                    </div> -->
                  </div>
                </div>
              </ng-template>
            </li>

            <li class="nav-item" ngbNavItem
              *ngIf="(permision.addPrms == '1'||currentUser.role == 'Community') && aplHide && !(snglShftDtls[0]?.assigned == 2)">
              <a ngbNavLink class="nav-link d-flex py-75" id="account-pill-general" data-toggle="pill"
                href="#account-vertical-general" aria-expanded="true">
                <i data-feather="user" class="font-medium-3 mr-1"></i>
                <span class="font-weight-bold">Clock In/Out Info & Edit</span>
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Details of Assigned User</h4>
                  </div>
                  <div class="card-body">

                    <div class=" col-lg-12 ">
                      <div class="card">

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>First Name : </h6>
                          </div>
                          <div class="col-6"><span class="first_name"> {{usrCmAssg?.first_name ||
                              shftData?.first_name}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Last Name : </h6>
                          </div>
                          <div class="col-6"><span class="last_name"> {{ usrCmAssg?.last_name ||
                              shftData?.user_lastname}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Phone Number : </h6>
                          </div>
                          <div class="col-6"><span class="phone_number"> {{usrCmAssg?.phone_number | mask: '(000)
                              000-0000'}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Scheduled Start Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftStartTime"> {{shiftStartTime || '---'}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Scheduled End Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{shiftEndTime || '---' }}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Clock In Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{clkInTm || '---' }} </span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Clock Out Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{clkOtTm || '---'}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Variance Form Complete: </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{shftData?.varFrmCmpl == '0' ? 'No' :
                              'Yes'}}</span></div>
                        </div>


                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Adjust Start Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{adjSrtTime || '---' }}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Adjust End Time : </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{adjEndTime || '---'}} </span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Break: </h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime">{{snglShftDtls[0].break_time}}</span></div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Adjusted Break: </h6>
                          </div>
                          <!-- <div class="col-6"><span class="shiftEndTime"> {{shftData?.adj_break_time}} </span></div> -->
                          <div class="col-6"><span class="shiftEndTime"> {{snglShftDtls[0].adj_end_time == null ? '0' : snglShftDtls[0].adj_end_time == snglShftDtls[0].adj_start_time ? '0' : shftData.adj_break_time ? shftData.adj_break_time : snglShftDtls[0].adj_break_time}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Assigned By:</h6>
                          </div>
                          <div class="col-6"><span class="shiftEndTime"> {{shftData?.assigned_by}}</span>
                          </div>
                        </div>


                        <!-- <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Adjusted Break: </h6>
                          </div>
                        </div> -->

                        <div class="row addUserbtn">
                          <div class="m-1">
                            <button type="button" (click)="goBackShift()" class="btn btn-primary" [disabled]="btnShow">
                              <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                              Cancel
                            </button>

                            <button type="button" (click)="editOpen()" class="btn btn-primary ml-1"
                              *ngIf="Showbtn == true">
                              <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                              Edit
                            </button>

                          </div>
                        </div>
                      </div>
                      <!-- <div class="card">
                        <div *ngIf="!usrCmAssg">
                          <div>
                            No data to display
                          </div>
                        </div>
                      </div> -->
                    </div>
                    <!-- <div class="d-flex justify-content-center" *ngIf="!usrCmAssg">
                      <p>Loading...</p><span class="spinner-border spinner-border-sm" role="status"></span>
                    </div> -->
                  </div>
                </div>
              </ng-template>
            </li>
            <!-- || ((snglShftDtls[0].assigned != 0 && snglShftDtls[0].status !='0') && snglShftDtls[0].approved == 1 && (snglShftDtls[0].assigned ==2 || snglShftDtls[0].assigned ==3)) -->
            <!-----------------Upload Variance-------------------------->
            <li class="nav-item" ngbNavItem
              *ngIf="(permision.addPrms == '1'|| currentUser.user_role =='2' || currentUser.user_role == '5' ) && (checkVal =='0' && snglShftDtls[0]?.assigned == 3)&& Showbtn == true">
              <a ngbNavLink class="nav-link d-flex py-75" id="account-pill-general" data-toggle="pill"
                href="#account-vertical-general" aria-expanded="true">
                <i data-feather="user" class="font-medium-3 mr-1"></i>
                <span class="font-weight-bold">Upload Variance</span>
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Upload Variance</h4>
                  </div>
                  <div class="row">
                    <div class="col-md-4" style="margin-left: 10px" *ngIf="snglShftDtls[0]?.files">
                      <h4 class="first_name"> {{usrCmAssg?.first_name || 'Form Uploaded'}}</h4>
                    </div>
                    <button type="button" *ngIf="snglShftDtls[0]?.files" class="btn-sm btn-info ml-1"
                      style="width: 150px;">
                      <a href="{{snglShftDtls[0]?.files}}" download style="color:#fff">
                        <i class="fa fa-download "></i> Download File
                      </a>
                    </button>
                  </div>

                  <div class="card-body">

                    <form [formGroup]="varianceForm" (ngSubmit)="varianceSubmit()">

                      <div class="row">
                        <div class="col-lg-4">
                          <div class="common-form-left">
                            <label for="inputPassword6" class="col-form-label">
                              <h4>Variance Name</h4>
                            </label>
                          </div>
                        </div>
                        <div class="col-lg-8">
                          <!-- <div class="common-form-left form-group">
                            <input type="file" [class.is-invalid]="vf['file'].dirty && vf['file'].invalid"
                              formControlName="file" class="form-control form-control-user" id="file" (change)="fileChange($event)"
                              id="inputPassword6" class="form-control" aria-describedby="passwordHelpInline">
                            <span *ngIf="vf['file'].dirty && vf['file'].invalid">
                              <div class="invalid-feedback" *ngIf="vf['file'].hasError('required')"
                                class="text text-danger">
                                This field required
                              </div>
                            </span>
                          </div> -->
                          <button type="button" (click)="fileInput.click()" class="btn-sm btn-info ml-1"
                            *ngIf="permision.addPrms == '1'||currentUser.role == 'SuperAdmin' || currentUser.role == 'Community'|| currentUser.role == 'Agency' || currentUser.role == 'Admin' || currentUser.user_role =='5'">
                            <i class="fa fa-file "></i> Import File
                            <input #fileInput type="file" (click)="fileInput.value = null"
                              (change)="onFileInput(fileInput.files)" style="display:none;" />
                          </button>
                        </div>
                      </div>
                      <div class="row addUserbtn">
                        <div class="m-1">
                          <button type="button" (click)="goBackShift()" class="btn btn-primary" [disabled]="btnShow">
                            <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                              aria-hidden="true"></span>
                            Cancel
                          </button>

                          <!-- <button type="submit" class="btn btn-primary ml-1" >
                            <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                              aria-hidden="true"></span>
                            Upload
                          </button> -->
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </ng-template>
            </li>

            <!-----------------View Variance------------------------->
            <li class="nav-item" ngbNavItem
              *ngIf="currentUser.role == 'SuperAdmin' || permision.addPrms == '1'|| currentUser.user_role == 3 || currentUser.role == 'Community'|| currentUser.role == 'Agency' && fileToUpload?.length">
              <a ngbNavLink class="nav-link d-flex py-75" id="account-pill-general" data-toggle="pill"
                href="#account-vertical-general" aria-expanded="true">
                <i data-feather="user" class="font-medium-3 mr-1"></i>
                <span class="font-weight-bold">View Variance</span>
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Details of Variance</h4>
                  </div>
                  <div class="card-body">

                    <div class=" col-lg-12 ">
                      <div class="card">

                        <div class="row space  mb-1">
                          <div class="col-6">
                            <h6>Variance Name : </h6>
                          </div>
                          <div class="col-6" *ngIf="snglShftDtls[0]?.files"><span class="first_name">
                              {{usrCmAssg?.first_name || 'Agency Variance Form'}}</span>

                            <button type="button" class="btn-sm btn-info ml-1">
                              <a href="{{snglShftDtls[0]?.files}}" download style="color:#fff">
                                <i class="fa fa-download "></i> Download File
                              </a>
                            </button>
                          </div>
                          <div class="col-6" *ngIf="!snglShftDtls[0]?.files"><span class="first_name">No Form
                              Uploaded</span>
                          </div>
                        </div>

                        <div class="row addUserbtn">
                          <div class="m-1">
                            <button type="button" (click)="goBackShift()" class="btn btn-primary" [disabled]="btnShow">
                              <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                              Cancel
                            </button>

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>

            <li class="nav-item" ngbNavItem *ngIf="(currentUser.user_role == 1 || permision.addPrms == '1')">
              <a ngbNavLink class="nav-link d-flex py-75" id="account-pill-general" data-toggle="pill"
                href="#account-vertical-general" aria-expanded="true">
                <i data-feather="user" class="font-medium-3 mr-1"></i>
                <span class="font-weight-bold">Shift History</span>
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Shift History</h4>
                  </div>
                  <div class="card-body">

                    <div class=" col-lg-12 " *ngFor="let mng of snglShftDtls">
                      <div class="card">

                        <div class="row space  mb-1">
                          <div class="col-md-4">
                            <h6>Shift Start : </h6>
                          </div>
                          <div class="col-md-4"><span class="Shift_start"> {{historyStartTime}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-md-4">
                            <h6>Shift End : </h6>
                          </div>
                          <div class="col-md-4"><span class="Shift_end"> {{historyEndTime}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-md-4">
                            <h6>Posted At : </h6>
                          </div>
                          <div class="col-md-4"><span class="Posted_at"> {{stime}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-md-4">
                            <h6>Delay Period : </h6>
                          </div>
                          <div class="col-md-4"><span class="Delay_period"> {{mng.delay + ' '+ mng.h_m}}</span>
                          </div>
                        </div>

                        <div class="row space  mb-1">
                          <div class="col-md-4">
                            <h6>Posted By : </h6>
                          </div>
                          <div class="col-md-4"><span class="Posted_by"> {{mng?.shift_posted_by}}</span>
                          </div>
                        </div>

                        <div class="col-lg-12 ">
                          <div class="card mt-2">
                            <h4>Applied : </h4>
                          </div>
                          <div class="card table-responsive">
                            <!-- data-table.component.html -->
                            <table class="table">
                              <thead>
                                <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">Name</th>
                                  <th scope="col">Agency/Comm</th>
                                  <th scope="col">Applied</th>
                                  <th scope="col">Date</th>
                                  <th scope="col">Time</th>
                                  <th scope="col">Rate</th>

                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let item of AppliedData; let a = index" class="table-data">
                                  <td>{{a+1}}</td>
                                  <!-- <td>{{item.agency_contact_firstname + " " + item.agency_contact_lastname}}</td> -->
                                  <td>{{item?.first_name + " " + item?.user_lastname}}</td>
                                  <td>{{item?.agency_name}}</td>
                                  <td>{{item?.applied_for_by == null ? '---' : item?.applied_for_by}}</td>
                                  <td>{{item?.dataForApply}}</td>
                                  <td>{{item?.created_at| date:'hh:mm a':'IST'}}</td>
                                  <td>${{item?.hourly_rates}}</td>
                                </tr>
                              </tbody>
                            </table>

                          </div>
                        </div>

                        <div class="col-lg-12 ">
                          <div class="card">
                            <h4>Assigned : </h4>
                          </div>
                          <div class="card table-responsive">
                            <!-- data-table.component.html -->
                            <table class="table" >
                              <thead>
                                <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">Name</th>
                                  <th scope="col">Agency/Comm</th>
                                  <th scope="col">Assigned By</th>
                                  <th scope="col">Date</th>
                                  <th scope="col">Time</th>
                                  <th scope="col">Rate</th>

                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let item of AssignedData; let a = index" class="table-data">
                                  <td>{{a+1}}</td>
                                  <!-- <td>{{item.agency_contact_firstname + " " + item.agency_contact_lastname}}</td> -->
                                  <td>{{item?.first_name + " " + item?.user_lastname}}</td>
                                  <td>{{item?.agency_name}}</td>
                                  <td>{{item?.ash_assigned_by}}</td>
                                  <td>{{item?.assigned_time | customDateTime}}</td>
                                  <td>{{item?.assigned_time | customTime}}</td>
                                  <td>${{item?.hourly_rates}}</td>
                                </tr>
                              </tbody>
                            </table>

                          </div>
                        </div>

                        <div class="col-lg-12 ">
                          <div class="card">
                            <h4>Canceled : </h4>
                          </div>
                          <div class="card table-responsive">
                            <!-- data-table.component.html -->
                            <table class="table">
                              <thead>
                                <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">Name</th>
                                  <th scope="col">Agency/Comm</th>
                                  <th scope="col">Canceled By</th>
                                  <th scope="col">Date</th>
                                  <th scope="col">Time</th>
                                  <th scope="col">Rate</th>
                                  <th scope="col">Reason</th>

                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let item of CanceledData; let a = index" class="table-data">
                                  <td>{{a+1}}</td>
                                  <td>{{item?.first_name + " " + item?.user_lastname}}</td>
                                  <td>{{item?.agency_name}}</td>
                                  <td>{{item?.canceled_by}}</td>
                                  <td>{{item?.canceled_time | customDateTime}}</td>
                                  <td>{{item?.canceled_time | customTime}}</td>
                                  <td>${{item?.hourly_rates}}</td>
                                  <td>{{item?.shift_cancel_reason}}</td>

                                </tr>
                              </tbody>
                            </table>

                          </div>
                        </div>

                        <div class="col-lg-12 " *ngIf="deletedData.length">
                          <div class="card">
                            <h4>Archived : </h4>
                          </div>
                          <div class="card">
                            <!-- data-table.component.html -->
                            <table>
                              <thead>
                                <tr>
                                  <th>#</th>                               
                                  <th>Archived By</th>
                                  <th>Date</th>
                                  <th>Time</th>
                                  <th>Reason</th>

                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let item of deletedData; let a = index">
                                  <td>{{a+1}}</td>
                                  <td>{{item?.archived_by}}</td>
                                  <td>{{item?.dateForAssign}}</td>
                                  <td>{{item?.updated_at| date:"hh:mm a":'IST'}}</td>
                                  <td>{{item?.shift_delete_reason}}</td>

                                </tr>
                              </tbody>
                            </table>

                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>

          </ul>

        </div>
        <div [ngbNavOutlet]="navVertical" class="col-12 col-md-9"></div>
      </div>
    </section>
    <!--/ account setting page -->
  </div>
</div>

<!-- Users List -->
<ng-template #UserLiST let-modal>
  <div class="modal-header bg-danger">
    <h4 class="modal-title text-white" id="myModalLabel1">Users List</h4>
    <button type="button" [disabled]="deletingUser" class="close" (click)="closeded(modal)" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="d-flex align-items-center justify-content-end pr-1 pb-1 pl-1 pl-md-0 pb-md-0 my-1">
        <label class="d-flex align-items-center"> {{ 'DEPOSIT.depoSearch' | translate}}
            <input type="text" (keyup)="searchUser($event)" placeholder="Search" class="form-control ml-25"
                [(ngModel)]="searchUserName" />
        </label>
    </div>
  <div class="modal-body" tabindex="0" ngbAutofocus>

    <div class="table-responsive" style="height: 60vh;">
      <table class="table">
        <thead>
          <tr>
            <th scope="col" class="col btn-primary">No.</th>
            <th scope="col" class="col btn-primary">Apply</th>
            <th scope="col" class="col btn-primary">Firstname</th>
            <th scope="col" class="col btn-primary">Lastname</th>
            <th scope="col" class="col btn-primary"> Phone No.</th>
            <th scope="col" class="col btn-primary"> Email</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let snglUsr of agncyUsr; let i = index" style="font-size: 12px !important;">
            <td class="col">{{i + 1}}</td>
            <td class="col" *ngIf="!snglUsr.is_blocked">
              <button class="btn-sm btn-primary" (click)="assignShift(snglUsr,modal)">Apply
              </button>
              <!-- <b *ngIf="snglUsr.asgnBtn">Assigned</b> -->
            </td>
            <td *ngIf="snglUsr.is_blocked">
              <h5>Blocked</h5>
            </td>
            <td class="col">{{snglUsr?.first_name ? snglUsr?.first_name :
              snglUsr?.agency_name}} </td>
            <td class="col">{{snglUsr?.last_name ? snglUsr?.last_name :
              '---' }} </td>
            <!-- <td class="col">{{snglUsr?.last_name ? snglUsr?.last_name : 'Not Assign'}} ({{snglUsr?.user_id != null ? 'Community' : 'Agency'}})</td> -->
            <td class="col">{{(snglUsr?.phone_number ? snglUsr.phone_number
              : snglUsr.agency_contact_cell_number) | numberFormat }}</td>
            <td class="col">{{snglUsr?.email ? snglUsr?.email :
              snglUsr?.agency_contact_email_address}}</td>
            <!-- <td class="col">{{snglUsr?.hourly_rate}}</td> -->

          </tr>
          <tr *ngIf="!agncyUsr?.length">
            <td>
              No data to display
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <button class="btn-sm btn-primary mt-1" (click)="openAddNew()">Add New User</button>
    <!-- </div>
          </div> -->



  </div>


</ng-template>
<!-- / Users List -->

<ng-template #Addnew let-modal>
  <div class="modal-header bg-danger">
    <h4 class="modal-title text-white" id="myModalLabel1">Add New User</h4>
    <button type="button" [disabled]="deletingUser" class="close" (click)="closeded(modal)" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" tabindex="0" ngbAutofocus>

    <form class="user" [formGroup]="addNewUser" (ngSubmit)="submitted(modal)">
      <div class="row">
        <div class="col-lg-4">
          <div class="common-form-left">
            <label for="inputPassword6" class="col-form-label">User First Name <span class="text-danger">*</span>
            </label>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="common-form-left form-group">
            <input type="text" [class.is-invalid]="controls['first_name'].dirty && controls['first_name'].invalid"
              formControlName="first_name" class="form-control form-control-user" id="first_name" class="form-control"
              placeholder="First Name" aria-describedby="passwordHelpInline">
            <span *ngIf="controls['first_name'].dirty && controls['first_name'].invalid">
              <div class="invalid-feedback" *ngIf="controls['first_name'].hasError('required')"
                class="text text-danger">
                This field required
              </div>
            </span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-4">
          <div class="common-form-left">
            <label for="inputPassword6" class="col-form-label">User Last Name <span class="text-danger">*</span>
            </label>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="common-form-left form-group">
            <input type="text" [class.is-invalid]="controls['last_name'].dirty && controls['last_name'].invalid"
              formControlName="last_name" class="form-control form-control-user" id="last_name" class="form-control"
              placeholder="Last Name" aria-describedby="passwordHelpInline">
            <span *ngIf="controls['last_name'].dirty && controls['last_name'].invalid">
              <div class="invalid-feedback" *ngIf="controls['last_name'].hasError('required')" class="text text-danger">
                This field required
              </div>
            </span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-4">
          <div class="common-form-left">
            <label for="inputPassword6" class="col-form-label">Username <span class="text-danger">*</span>
            </label>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="common-form-left form-group">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">{{slctSrtNm || '---'}}</span>
              </div>
              <input type="text" class="form-control" noLeadingSpace formControlName="username" placeholder="Username"
                aria-label="Username">
            </div>
            <span *ngIf="controls['username'].dirty && controls['username'].invalid">
              <div class="invalid-feedback" *ngIf="controls['username'].hasError('required')" class="text text-danger">
                This field required
              </div>
            </span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-4">
          <div class="common-form-left">
            <label for="inputPassword6" class="col-form-label">
            </label>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="common-form-left form-group">
            Preview : <b>{{(slctSrtNm || '---') + '-' + addNewUser.controls['username'].value}}</b>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-4">
          <div class="common-form-left">
            <label for="inputPassword6" class="col-form-label">User Cell Phone Number <span
                class="text-danger">*</span></label>
          </div>
        </div>
        <div class="col-lg-8">
          <div class="common-form-left form-group">
            <div class="row">
              <div class="col-2 test_data">
                <div ngbDropdown class="d-inline-block">
                  <button type="button" class="btn btn-outline-primary" id="dropdownBasic1"
                    ngbDropdownToggle>{{selectedDataValue ? selectedDataValue : 'Select Code'}}</button>
                  <div ngbDropdownMenu aria-labelledby="dropdownBasic1" style="overflow: auto; max-height: 200px;">
                    <ng-container *ngFor="let item of phoneUsd" style="overflow-y:scroll;">
                      <button type="button" ngbDropdownItem (click)="mapCountry_selected(item)"><img class="dpwImg"
                          src="https://flagsapi.com/{{item.code}}/flat/64.png">{{item.dial_code}}</button>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="col-10">
                <input type="text" phoneMask [preValue]="addNewUser.value.phone_number" maxlength="14"
                  style="height: 45px;"
                  [class.is-invalid]="controls['phone_number'].dirty && controls['phone_number'].invalid"
                  placeholder="User Cell Phone Number" formControlName="phone_number"
                  class="form-control form-control-user" id="phone_number">
                <span *ngIf="controls['phone_number'].dirty && controls['phone_number'].invalid">
                  <div class="invalid-feedback" *ngIf="controls['phone_number'].hasError('required')"
                    class="text text-danger">
                    This field required
                  </div>
                  <div class="invalid-feedback" *ngIf="controls['phone_number'].hasError('pattern')"
                    class="text text-danger">
                    Enter valid Phone number
                  </div>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <div class="common-form-field">
            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label">User Email Address <span
                      class="text-danger">*</span>
                  </label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">
                  <input type="text" [class.is-invalid]="controls['email'].dirty && controls['email'].invalid"
                    formControlName="email" class="form-control form-control-user" id="email" class="form-control"
                    placeholder="User Email Address" aria-describedby="passwordHelpInline">
                  <span *ngIf="controls['email'].dirty && controls['email'].invalid">
                    <div class="invalid-feedback" *ngIf="controls['email'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                    <div class="invalid-feedback" *ngIf="controls['email'].hasError('email')" class="text text-danger">
                      Please enter valid email
                    </div>
                  </span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                  <div class="common-form-left">
                      <label for="inputPassword6"
                          class="col-form-label">Password</label>
                  </div>
              </div>
              <div class="col-lg-8">
                  <div class="common-form-left form-group">
                      <input [type]="passwordTextType ? 'text' : 'password'"
                          [class.is-invalid]="controls['password'].dirty && controls['password'].invalid"
                          formControlName="password"
                          class="form-control form-control-user"
                          >
                          <div class="input-group-append">
                              <span class="input-group-text cursor-pointer eyeBtn"
                                ><i
                                  class="feather font-small-4"
                                  [ngClass]="{
                                    'icon-eye-off': passwordTextType,
                                    'icon-eye': !passwordTextType
                                  }"
                                  (click)="togglePasswordTextType()"
                                ></i
                              ></span>
                            </div>
                      <span
                          *ngIf="controls['password'].dirty && controls['password'].invalid">
                          <div class="invalid-feedback"
                              *ngIf="controls['password'].hasError('required')"
                              class="text text-danger">
                              This field required
                          </div>
                          <div class="invalid-feedback"
                              *ngIf="controls['password'].hasError('pattern')"
                              class="text text-danger">
                              Password must be at least 8 characters and contain a combination of uppercase and lowercase letters and at least one special character or number.
                          </div>
                      </span>
                  </div>
              </div>
          </div>

          <div class="row">
              <div class="col-lg-4">
                  <div class="common-form-left">
                      <label for="inputPassword6"
                          class="col-form-label">Confirm Password</label>
                  </div>
              </div>
              <div class="col-lg-8">
                  <div class="common-form-left form-group">
                      <input [type]="passwordTextType2 ? 'text' : 'password'"
                          [class.is-invalid]="controls['cnfrmpassword'].dirty && controls['cnfrmpassword'].invalid"
                          formControlName="cnfrmpassword"
                          class="form-control form-control-user"
                          id="cnfrmpassword">
                          <div class="input-group-append">
                              <span class="input-group-text cursor-pointer eyeBtn"
                                ><i
                                  class="feather font-small-4"
                                  [ngClass]="{
                                    'icon-eye-off': passwordTextType2,
                                    'icon-eye': !passwordTextType2
                                  }"
                                  (click)="togglePasswordTextType2()"
                                ></i
                              ></span>
                            </div>
                      <span
                          *ngIf="controls['cnfrmpassword'].dirty && controls['cnfrmpassword'].invalid">
                          <div class="invalid-feedback"
                              *ngIf="controls['cnfrmpassword'].hasError('required')"
                              class="text text-danger">
                              This field required
                          </div>

                          <div *ngIf="controls.cnfrmpassword.errors.confirmedValidator"
                              style="color: #ea5455; font-size: 1rem;">
                              Password and Confirm Password must be match.
                          </div>
                      </span>
                  </div>
              </div>
          </div>
            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label">Add User Role <span
                      class="text-danger">*</span></label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">
                  <ng-multiselect-dropdown placeholder="--Select Role--" [settings]="CmntdropdownSettings"
                    formControlName="addUsrRl" [data]="data1"></ng-multiselect-dropdown>
                  <span *ngIf="controls['addUsrRl'].dirty && controls['addUsrRl'].invalid">
                    <div class="invalid-feedback" *ngIf="controls['addUsrRl'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
            </div>
            <div class="row addUserbtn">
              <div class="m-1">
                <button type="submit" class="btn btn-primary" [disabled]="btnShow">
                  <span *ngIf="btnShow" class="spinner-border spinner-border-sm" role="status"
                    aria-hidden="true"></span>
                  Add
                </button>
                <button type="button" (click)="closeded(modal)" class="btn btn-primary ml-1" [disabled]="btnShow">
                  Cancel
                </button>
              </div>

            </div>
          </div>
        </div>
      </div>
    </form>
  </div>


</ng-template>

<!-- Addnew List -->
<!-- <ng-template #Addnew let-modal>
  <div class="modal-header bg-danger">
    <h4 class="modal-title text-white" id="myModalLabel1">Add New User</h4>
    <button type="button" [disabled]="deletingUser" class="close" (click)="closeded(modal)" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" tabindex="0" ngbAutofocus>

    <form class="user" [formGroup]="addNewUser" (ngSubmit)="submitted()">
      <div class="row">
        <div class="col-lg-12">
          <div class="common-form-field">
            <div class="row">
              <div class="col-lg-12">
                <div class="welcome-logo">
                  <img src="assets/images/log.png" alt="">
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label">First Name <span
                      class="text-danger">*</span></label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">
                  <input type="text" [class.is-invalid]="controls['first_name'].dirty && controls['first_name'].invalid"
                    formControlName="first_name" class="form-control form-control-user" id="first_name"
                    id="inputPassword6" class="form-control" aria-describedby="passwordHelpInline">
                  <span *ngIf="controls['first_name'].dirty && controls['first_name'].invalid">
                    <div class="invalid-feedback" *ngIf="controls['first_name'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                  <div class="common-form-left">
                      <label for="inputPassword6"
                          class="col-form-label">Last Name <span class="text-danger">*</span></label>
                  </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">
                  <input type="text" [class.is-invalid]="controls['last_name'].dirty && controls['last_name'].invalid"
                    formControlName="last_name" class="form-control form-control-user" id="last_name"
                    id="inputPassword6" class="form-control" aria-describedby="passwordHelpInline">
                  <span *ngIf="controls['last_name'].dirty && controls['last_name'].invalid">
                    <div class="invalid-feedback" *ngIf="controls['last_name'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
          </div>
    
            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label"> Phone Number
                    <span class="text-danger">*</span></label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">
                  <input type="text" phoneMask [preValue]="addNewUser.value.phone_number" maxlength="14"
                    [class.is-invalid]="controls['phone_number'].dirty && controls['phone_number'].invalid"
                    formControlName="phone_number" class="form-control form-control-user" id="phone_number">
                  <span *ngIf="controls['phone_number'].dirty && controls['phone_number'].invalid">
                    <div class="invalid-feedback" *ngIf="controls['phone_number'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                    <div class="invalid-feedback" *ngIf="controls['phone_number'].hasError('pattern')"
                      class="text text-danger">
                      Enter valid phone number
                    </div>
                  </span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                  <div class="common-form-left">
                      <label for="inputPassword6"
                          class="col-form-label"> Pin Code
                          <span class="text-danger">*</span></label>
                  </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">
                  <input inputDirective inptype="number" type="text" [class.is-invalid]="controls['pin'].dirty && controls['pin'].invalid"
                    formControlName="pin" class="form-control form-control-user" id="pin" maxlength="5"
                    id="inputPassword6" class="form-control" aria-describedby="passwordHelpInline">
                  <span *ngIf="controls['pin'].dirty && controls['pin'].invalid">
                    <div class="invalid-feedback" *ngIf="controls['pin'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
          </div>

            <button type="submit" class="btn btn-primary">
              Add
              <span *ngIf="btnShow" [disabled]="btnShow" class="spinner-border spinner-border-sm" role="status"
                aria-hidden="true"></span>
            </button>
            <button type="button" (click)="closeded(modal)" class="btn btn-primary ml-1" [disabled]="btnShow">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </form>



  </div>


</ng-template> -->
<!-- / Addnew List -->

<!-- Edit modal -->
<ng-template #editModal let-modal>
  <div class="modal-header bg-danger">
    <h4 class="modal-title text-white" id="myModalLabel1">Variance Form Adjustments</h4>
    <button type="button" [disabled]="deletingUser" class="close" (click)="closeded(modal)" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" tabindex="0" ngbAutofocus>

    <form class="user" [formGroup]="editModalForm">
      <div class="row">
        <div class="col-lg-12">
          <div class="common-form-field">

            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label">Variance Form Reviewed</label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">

                  <div class="row">
                    <div class="col-lg-8">
                      <div class="common-form-left form-group d-flex">
                        <div class="form-check">
                          <input class="form-check-input" value='1' formControlName="varFrmCmpl" type="radio"
                            id="flexRadioDefault1">
                          <label class="form-check-label" for="flexRadioDefault1">
                            Yes
                          </label>
                        </div>
                        <div class="form-check ml-3">
                          <input class="form-check-input" formControlName="varFrmCmpl" value='0' type="radio"
                            id="flexRadioDefault2">
                          <label class="form-check-label" for="flexRadioDefault2">
                            No
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <span *ngIf="ec['varFrmCmpl'].dirty && ec['varFrmCmpl'].invalid">
                    <div class="invalid-feedback" *ngIf="ec['varFrmCmpl'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label">Variance Clock In Time</label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">

                  <div class="row">
                    <div class="input-group col-lg-12">
                      <input type="date" class="form-control" formControlName="holi_strDate"
                        aria-label="Text input with dropdown button">

                      <select placeholder="HH:MM" formControlName="holi_strTime" name="startTime" class="form-control">
                        <option disabled value="">Hours</option>
                        <option *ngFor="let tm of hrs">
                          {{tm}}</option>
                      </select>

                      <select placeholder="HH:MM" formControlName="holi_strTime1" name="startTime" class="form-control">
                        <option disabled value="">Minutes</option>
                        <option *ngFor="let tm of count">
                          {{tm}}</option>
                      </select>

                    </div>
                  </div>
                  <span *ngIf="ec['holi_strDate'].dirty && ec['holi_strDate'].invalid">
                    <div class="invalid-feedback" *ngIf="ec['holi_strDate'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label">Variance Clock Out Time</label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">

                  <div class="row">
                    <div class="input-group col-lg-12">
                      <input input type="date" min="{{ec['holi_strDate'].value}}" formControlName="holi_endDate"
                        class="form-control" aria-label="Text input with dropdown button">

                      <select placeholder="HH:MM" formControlName="holi_endTime" class="form-control">
                        <option disabled value="">Hours</option>
                        <option *ngFor="let tm of hrs">
                          {{tm}}</option>
                      </select>

                      <select placeholder="HH:MM" formControlName="holi_endTime1" class="form-control">
                        <option disabled value="">Minutes</option>
                        <option *ngFor="let tm of count">
                          {{tm}}</option>
                      </select>

                    </div>
                  </div>
                  <span *ngIf="ec['holi_endDate'].dirty && ec['holi_endDate'].invalid">
                    <div class="invalid-feedback" *ngIf="ec['holi_endDate'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                <div class="common-form-left">
                  <label for="inputPassword6" class="col-form-label">Variance Adjusted Break</label>
                </div>
              </div>
              <div class="col-lg-8">
                <div class="common-form-left form-group">

                  <div class="row">
                    <div class="input-group col-lg-12">
                      <!-- <input input type="date" 
                         formControlName="adj_Brk"
                        class="form-control" aria-label="Text input with dropdown button"> -->

                      <select placeholder="HH:MM" formControlName="adj_BrkTime" class="form-control">
                        <option disabled value="">---Adjusted Break In Minutes---</option>
                        <option *ngFor="let tm of count2">
                          {{tm}}</option>
                      </select>

                    </div>
                  </div>
                  <span *ngIf="ec['adj_BrkTime'].dirty && ec['adj_BrkTime'].invalid">
                    <div class="invalid-feedback" *ngIf="ec['adj_BrkTime'].hasError('required')"
                      class="text text-danger">
                      This field required
                    </div>
                  </span>
                </div>
              </div>
            </div>


            <button (click)="popup(val)" class="btn btn-primary">
              Save
              <span *ngIf="btnShow" [disabled]="btnShow" class="spinner-border spinner-border-sm" role="status"
                aria-hidden="true"></span>
            </button>
            <button type="button" (click)="closeded(modal)" class="btn btn-primary ml-1" [disabled]="btnShow">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </form>



  </div>


</ng-template>
<!-- / Edit modal -->


<ng-template #comUsrApply let-modal> 
  <div class="modal-header bg-danger" tabindex="0" ngbAutofocus>
    <h5 class="modal-title text-white">Confirmation Message</h5>
      <button type="button" [disabled]="deletingUser" class="close" (click)="closeded(modal)" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
  </div>
  <div class="modal-footer">
    <div class="col-12">
      <h5>Is your variance review complete? If you click Yes the Variance Form Reviewed button will be changed to Yes and If you click No the Variance Form Reviewed button will be changed to No. </h5>
    </div>
      <button type="button" [disabled]="btnShow" class="btn btn-danger d-flex float-left"
          style="margin-top: 10px!important;" (click)="editModalsubmitted(1)"  rippleEffect>
          <span *ngIf="btnShow" class="spinner-border spinner-border-sm mr-1"></span> Yes
      </button>
      <button type="button" [disabled]="btnShow" class="btn btn-danger d-flex float-right"
      style="margin-top: 10px!important;" (click)="editModalsubmitted(0)" rippleEffect>
      <span *ngIf="btnShow" class="mr-2"></span>No
  </button>
  </div>
</ng-template> 

<!-- <ng-image-fullscreen-view *ngIf="imageObject && imageObject.length" [images]="imageObject"
    [imageIndex]="selectedImageIndex" [show]="showFlag" (close)="closeEventHandler()"></ng-image-fullscreen-view>contentHeader -->